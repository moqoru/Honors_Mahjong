# <자패 마작 게임 제작 보고서>

## 1. 소개

- 이 게임은 대학교 자바 프로그래밍 과목의 기말 프로젝트로 제작하였으며, 당시 제출했던 보고서의 내용을 토대로 마크다운 문서를 제작하였다.
- 2인 1조로 팀을 꾸려 일본, 중국 등 다양한 나라에서 성행하는 보드게임인 '마작' 에서 룰을 간소화하고 단순하게 만든 '자패마작' 이라는 게임을 제작하였다. 자패마작이란 CPU와 플레이어 2명이서 대결하여, 東西南北白發中 7종류의 패 4세트, 총 28개의 패를 이용하여 특정한 형태가 완성되도록 패를 먼저 구성하면 승리하는 게임이다. 게임상에서는 입력의 편의를 위해 각 종류의 패를 東="E", 南="S", 西="W", 北="N", 白="O", 發="G", 中="R"로 표기하였다.

## 2. 게임 플레이 규칙

### 2-1. 게임 전체 진행

- CPU와 플레이어는 첫 게임이 시작될 때 15점씩을 가지고 시작하며, 승리한 사람이 획득한 점수만큼 패배한 사람의 점수를 가져오고 어느 한쪽의 점수가 0점 이하가 되면 게임이 끝난다.

  - 각 게임이 시작되면 패를 무작위로 섞은 뒤 CPU와 플레이어는 7개의 패를 받으며, 첫 게임에서는 플레이어부터, 이후로는 이전 게임에서 승리한 쪽부터 시작해서 번갈아가며 1개의 패를 받은 뒤 필요 없는 패 1개를 상대방이 볼 수 있도록 자신의 앞쪽에 버리는 것을 반복한다.

  - 자신의 차례에서 받은 패로 특정한 형태가 완성되면 '쯔모'를 선언해서 승리할 수 있으며, 현재 상대방 차례에서 버린 패 1개를 자신이 들고 있는 패에 포함시켜서 특정한 형태를 완성시킬 수 있는 상태이면 '론'을 선언해서 승리할 수 있다. 단, 론을 선언할 때는 포함시키는 상대방의 패가 자신이 버렸던 패가 아니어야 한다.

  - 또한, 28개의 패를 모두 사용할 때까지 아무도 자신의 패로 형태를 완성시키지 못할 경우, 무승부가 되며 그 게임에서 나중에 시작한 사람이 다음 게임에서 먼저 시작한다.

### 2-2. 상대방의 패 가져오기

- 때때로 상대방이 버린 패를 가져와서 자신의 패를 구성하는 데 쓸 수 있으며, 이때는 상대방에게 자신이 그 패로 형태를 만들 수 있다는 것을 보여주기 위해 패의 일부를 상대방이 볼 수 있게 공개하게 된다.

  - 같은 종류의 패 2개가 있을 때 상대방이 같은 종류의 패를 버렸을 경우 '퐁'을 선언하면 상대방의 패를 가져온 뒤 같은 종류의 패 3개를 공개하며 게임상에서는 "XX+X"로 표시한다. 퐁을 선언할 경우, 자신의 차례에 가져올 패 대신 상대방의 패를 가져왔으므로 바로 자신의 필요 없는 패 1개를 버린다.

  - 같은 종류의 패 3개가 있을 때 상대방이 같은 종류의 패를 버렸을 경우 '대명깡'을 선언하면 상대방의 패를 가져온 뒤 같은 종류의 패 4개를 공개하며 게임상에서는 "XXX+X"로 표시한다.

  - 또한 상대방이 버린 패를 가져오는 경우는 아니지만, 자신의 차례에서 패를 가져왔을 때 자신의 패 중에서 같은 종류의 패 4개가 있을 경우 '안깡'을 선언하면 같은 종류의 패 4개를 공개하며 게임상에서는 "XXXX"의 형식으로 표시한다.

  - 그리고 자신의 차례에서 자신의 패 중에 이미 퐁을 선언한 패와 같은 종류의 패가 있을 경우 '가깡'을 선언하면 같은 종류의 패 4개를 공개하며 게임상에서는 "XX+X+X"로 표시한다.

  - 모든 종류의 깡을 선언할 경우, 같은 종류의 패 4개를 3개의 패와 동일하게 취급하므로, 퐁과 달리 추가로 1개의 패를 받은 뒤 필요 없는 패 1개를 버린다.

### 2-3. 점수 계산

- 게임에서 승리할 수 있는 패의 형태는 다음과 같다. (설명의 편의를 위해 같은 종류 패 4개를 '깡쯔', 3개를 '커쯔', 2개를 '또이쯔'로 표기하였다.)

  1. 2종류의 패로 커쯔 또는 깡쯔를 만들고, 1종류의 패로 또이쯔를 만드는 경우

     - One closed triplet, 이안커(1점) : 퐁을 선언하지 않고 커쯔 1개를 만듦

     - Two closed triplets, 량안커(3점) : 퐁을 선언하지 않고 커쯔 2개를 만듦

     - One closed kan, 이안깡(2점) : 안깡을 선언하여 깡쯔 1개를 만듦

     - Two kans, 량깡쯔(3점) : 깡 종류에 관계없이 깡쯔 2개를 만듦

     - Two closed kans, 량안깡(5점) : 안깡을 선언하여 깡쯔 2개를 만듦

  2. 1번의 경우, 패를 특정한 종류의 패로 구성하면 점수가 추가된다.

     - Three dragons, 대삼원(4점) : 모든 패를 白發中(OGR)로만 구성

     - Two dragons, 소삼원(3점) : 2개의 커쯔 또는 깡쯔를 白發中(OGR) 중 1가지씩의 패로 구성

     - Three winds, 대사희(3점) : 모든 패를 東西南北(ESWN)으로만 구성

     - Two winds, 소사희(2점) : 2개의 커쯔 또는 깡쯔를 東西南北(ESWN) 중 1가지씩의 패로 구성

  3. 단, 형태는 만들었지만 위의 경우에 해당되지 않는 경우, 점수가 없어 승리하지 못한다.
     - 예시 : SS OOO+O EE+E = 東 퐁 + 白 대명깡 + 南 또이쯔. 점수가 0점이다.

  4. 4종류의 패로 또이쯔를 만드는 경우

     - Dragon pairs, 사희또이쯔(3점) : 모든 패를 東西南北으로만 구성

     - Wind pairs, 삼원또이쯔(3점) : 3개의 또이쯔를 白發中으로 구성

     - Four pairs, 스또이츠(1점) : 위 두 가지 형태에 해당되지 않는 경우

  5. 7종류의 패 중 1종류의 패로 또이쯔를 만들고, 6종류의 패는 1개씩인 패를 만드는 경우

     - Seven orphans 7 wait, 국사무쌍 7면(3점) : 쯔모나 론을 선언하기 전 갖고 있던 7개의 패가 모두 서로 다른 종류의 패일 경우 (단, 이미 자신이 버렸던 패와 같은 종류의 패로 쯔모를 선언할 경우 2점)

     - Seven orphans, 국사무쌍(1점) : 쯔모나 론을 선언하기 전 1종류의 또이쯔를 갖고 있었을 경우

  6. 특수한 방법으로 승리하는 경우 점수가 추가된다.

     - Heavenly hand, 천화(4점) : 먼저 시작하는 사람이 처음으로 받은 패로 쯔모 선언

     - Earthly hand, 지화(2점) : 나중에 시작하는 사람이 처음으로 받은 패로 쯔모 선언

     - Hand of man, 인화(2점) : 나중에 시작하는 사람이 먼저 시작하는 사람의 첫 버림패로 론 선언

     - Last draw, 해저로월(1점) : 마지막 남은 패를 받아와서 쯔모 선언

     - Last discard, 하저로어(1점) : 마지막으로 버려진 패를 론 선언

     - Dead wall draw, 영상개화(1점) : 깡 선언 직후 가져온 패로 쯔모 선언

     - Robbing a quad, 창깡(1점) : 상대방이 안깡한 패로 국사무쌍 형태를 완성시킬 수 있을 때 론 선언

## 3. 프로그램 상세 구성

 ## 4. 제작 후기

- 프로그램을 직접 작성하다보니 계획했던 것들과 실제로 구현했을 때의 괴리감이 커서 아쉬웠다. 또한 시간에 쫓겨 프로그램을 작성하다 보니 곳곳에 부족한 점이 많이 보였다. 그래도 여러 명이서 함께 프로그램을 짜다보니 혼자서 프로그램을 짤 때 부족했던 부분들을 쉽게 보완할 수 있어서 좋았었던 것 같다.